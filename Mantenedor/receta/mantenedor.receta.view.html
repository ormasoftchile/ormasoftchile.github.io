<div class="container"> <div class="row"> <div class="columns large-12" style="border-bottom:1px solid #ccc"><span style="font-size:32px;color:#666;font-weight:300;padding-left:20px"> <i class="fa fa-clock-o" aria-hidden="true"></i> {{moduleTitle}}</span></div> </div> <div class="text-center ng-show" ng-hide="user.permisos.listarReceta"> <p class="base-font-size">No tiene los permisos necesarios para usar este módulo</p> </div> <div class="ng-show" ng-show="user.permisos.listarReceta"> <div class="row"> <div class="columns large-8"> <div class="separacion-top"> <div class="select"> <div class="large-12"> <span class="loading-input ng-show" ng-show="adm.select.waiting">&nbsp;<i class="fa fa-spinner fast-spin"></i>&nbsp;Cargando...</span> <div class="sin-resultado loading-input ng-show" ng-show="adm.select.sinResultado">&nbsp;No tiene establecimientos asignados</div> <input show-focus="adm.select.mostrar" class="ng-show" ng-hide="adm.select.sinResultado" ng-model="adm.select.searchText" ng-change="adm.select.actualizar()" ng-blur="adm.select.cerrar()" ng-focus="adm.select.desplegar()" ng-disabled="adm.select.waiting" placeholder="{{adm.select.placeholder}}"> </div> <div class="select-option large-12 ng-show" ng-show="adm.select.mostrar"> <table id="searchTextResults" class="large-12"> <tr ng-repeat="nodo in adm.select.nodos | filter:{RAZON_SOCIAL:adm.select.searchText}"> <td class="nodo-select" id="{{nodo.ID}}" ng-click="adm.select.seleccionar(nodo.ID)">{{nodo.RAZON_SOCIAL}}</td> </tr> </table> </div> </div> </div> </div> <div class="columns large-4"></div> </div> <div class="row"> <div class="columns large-12 button-cabecera" style="float:right"> <ul class="nav navbar-nav ng-show" ng-show="user.permisos.agregarReceta" style="float:left"> <li> <button ng-click="adm.solicitud.abrir()" class="btn btn-warning btn-left" type="button"> <a href="#" onclick="return!1" style="color:#fff"><i class="fa fa-user-plus fa-lg"></i> Asociar Tipo de Receta</a> </button> </li> </ul> <ul class="nav navbar-nav" style="float:right"> <li> <div class="input-group stylish-input-group" style="width:300px;float:right"> <input ng-keypress="adm.grilla.pressEnterSearch($event)" type="text" class="form-control" ng-model="adm.grilla.searchTerms" ng-change="adm.grilla.searchTermsChange()" placeholder="Ingrese el nombre del tipo de receta"> <span class="input-group-addon" style="background-color:#fff"> <button class="search-button" ng-click="adm.grilla.search()" type="submit" id="myBtn" style="background-color:#fff;border:none"><a href="#modal" style="color:#666"> <i class="fa fa-search" aria-hidden="true"></i></a> </button> </span> </div> </li> </ul> </div> </div> <div class="row"> <div class="table-responsive columns large-12" style="margin-top:20px"> <h5>Tipos de Receta para el nodo: {{adm.select.nombreEstablecimiento}}</h5> <form name="editFormm"> <table class="table grilla"> <thead class="thead-inverse" style="background-color:#00949B"> <tr> <th style="width:60%">Nombre<i ng-click="adm.sortNombre($event)" class="sorter fa fa-caret-down"></i></th> <th style="width:20%">Periodicidad<i ng-click="adm.sortPeriodicidad($event)" class="sorter fa fa-caret-down"></i></th> <th style="width:20%">Vigencia<i ng-click="adm.sortVigencia($event)" class="sorter fa fa-caret-down"></i></th> </tr> </thead> <tbody> <tr class="loading"> <td class="grilla-vacia ng-hide" colspan="{{adm.grilla.largo}}" ng-show="adm.grilla.waiting"> <i class="fa fa-4x fa-spinner fast-spin"></i> </td> </tr> <tr> <td class="grilla-sin-resultado ng-hide" colspan="{{adm.grilla.largo}}" ng-show="adm.grilla.sinResultado"> <p>No se encontraron resultados para la solicitud buscada</p> </td> </tr> <tr id="data-id-{{tipoReceta.TREC_ID}}" ng-repeat="tipoReceta in adm.grilla.resultado track by tipoReceta.TREC_ID"> <td class="upcase borde-tabla">{{getNombreReceta(tipoReceta.TREC_ID)}} <div id="botonera-id-{{tipoReceta.TREC_ID}}" class="botonera-grid btn-right"> <div class="botonera-no-edicion"> <button ng-click="popupDelete(tipoReceta)" class="upcase btn btn-warning ng-show" ng-show="user.permisos.eliminarReceta && tipoReceta.TREC_ID != 68">Eliminar</button> <button ng-click="editData($index,tipoReceta.TREC_ID)" class="upcase btn btn-warning ng-show" ng-show="user.permisos.modificarReceta">Editar</button> </div> <div class="botonera-edicion"> <button ng-click="cancelEdit(tipoReceta.TREC_ID)" class="upcase btn btn-warning">Cancelar</button> <button type="submit" ng-click="saveData(tipoReceta.TREC_ID)" class="btn btn-warning upcase">Guardar</button> </div> </div> </td> <td class="borde-tabla data-td-periodicidad"> <div class="data"> {{tipoReceta.PERIODICIDAD_DIAS}} </div> <div class="edit"> <input type="number" name="periodicidad" id="periodicidad" ng-model="receta.periodicidad" ng-keypress="adm.disableEnter($event)" ng-disabled="adm.procesandoSave" ng-init="receta.periodicidad=tipoReceta.PERIODICIDAD_DIAS" min="0" max="9999" numbers-only required> </div> </td> <td class="borde-tabla data-td-vigencia"> <div class="data"> {{tipoReceta.VIGENCIA_DIAS}} </div> <div class="edit"> <input type="number" name="vigencia" id="vigencia" ng-model="receta.vigencia" ng-disabled="adm.procesandoSave" ng-keypress="adm.disableEnter($event)" ng-init="receta.vigencia=tipoReceta.VIGENCIA_DIAS" min="0" max="9999" numbers-only required> </div> </td> </tr> </tbody> </table> </form> </div> </div> <div class="columns large-12"> <div class="columns large-4"></div> <div class="columns large-4"></div> <div class="columns large-4"> <div class="row"> <div class="botonera-drop btn-right"> <button href="#" data-dropdown="gridCounter" aria-controls="gridCounter" aria-expanded="false" class="btn btn-default button dropdown" style="float:left;margin-top:15px;margin-right:10px"> Mostrar {{adm.grilla.mostrando}} </button> <ul id="gridCounter" data-dropdown-content class="f-dropdown" aria-hidden="true"> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(10)">Mostrar 10</a></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(15)">Mostrar 15</a></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(20)">Mostrar 20</a></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(25)">Mostrar 25</a></li> <li role="separator" class="divider"></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(30)">Mostrar 30</a></li> </ul> </div> </div> </div> </div> <div class="row"> <div class="columns large-12"> <div class="columns large-4"></div> <div class="columns large-offset-4 large-4"> <nav aria-label="Page navigation ng-show" ng-show="adm.grilla.paginacion.mostrar"> <ul class="pagination"> <li> <a href="#" ng-click="adm.grilla.anteriorPagina()" onclick="return!1" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="(adm.grilla.paginaActual == page)? 'current':'' " ng-repeat="page in adm.grilla.paginacion.labels" ng-click="adm.grilla.muestraPagina(page)"> <a href="#" onclick="return!1">{{page}}</a> </li> <li> <a href="#" ng-click="adm.grilla.siguientePagina()" onclick="return!1" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </div> <div class="columns large-4"></div> </div> </div> </div> <div id="asociarReceta" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog" data-options="close_on_background_click:false;close_on_esc:false;"> <div class="modal-header"> <button class="close-reveal-modal" aria-label="Close" type="button">&times;</button> <h4 class="modal-title">Asociar Tipo de Receta</h4> </div> <div class="modal-body"> <div class="row"> <div class="large-4 columns inputs-modal"> <p class="base-font-size">&nbsp;&nbsp;Establecimiento:</p> </div> <div class="large-8 columns inputs-modal"> <p class="base-font-size">{{adm.select.nombreEstablecimiento}}</p> </div> </div> <div class="row"> <div class="large-4 columns inputs-modal"> <label for="tipo">&nbsp;&nbsp;Tipo de Receta*:</label> </div> <div class="large-8 columns inputs-modal"> <select id="tipo" name="tipo" ng-model="adm.solicitud.form.tipo" ng-change="adm.revisarExistencia();"> <option ng-repeat="tipoReceta in adm.select.tiposRecetaFiltrado track by tipoReceta.ID" value="{{tipoReceta.ID}}">{{tipoReceta.DESCRIPCION}}</option> </select> <div class="requerido ng-show"> <span class="upcase" ng-show="adm.solicitud.requerido.tipo">Requerido</span> <div ng-show="adm.trecOcupado">Tipo Receta {{adm.trecLeido.DESCRIPCION}} ya asignado al nodo</div> </div> </div> </div> <div class="row"> <div class="large-4 columns inputs-modal"> <label for="periodicidad">&nbsp;&nbsp;Periodicidad*:</label> </div> <div class="large-8 columns inputs-modal"> <input type="text" ng-model="adm.solicitud.form.periodicidad" min="0" maxlength="4" numbers-only> <div ng-show="adm.solicitud.requerido.periodicidad" class="requerido"> <span class="upcase" ng-show="adm.solicitud.requerido.periodicidad">Requerido</span> </div> </div> </div> <div class="row"> <div class="large-4 columns inputs-modal"> <label for="vigencia">&nbsp;&nbsp;Vigencia*:</label> </div> <div class="large-8 columns inputs-modal"> <input type="text" id="vigencia" ng-model="adm.solicitud.form.vigencia" min="0" maxlength="4" numbers-only> <div ng-show="form.$submitted || form.vigencia.$touched" class="requerido"> <span class="upcase" ng-show="adm.vigencia == undefined">Requerido</span> </div> <div class="requerido"> <span class="upcase" ng-show="adm.solicitud.requerido.vigenciaMenor">La vigencia debe ser mayor que la periodicidad</span> <span class="upcase" ng-show="adm.solicitud.requerido.vigencia">Requerido</span> </div> </div> </div> </div> <div class="modal-footer"> <button ng-click="adm.solicitud.insert();" class="btn btn-warning upcase btn-left">Asociar</button> <button ng-click="closeModal('#asociarReceta');" class="btn btn-danger upcase" aria-label="Close" aria-hidden="true">Cancelar</button> </div> </div> <div id="confirmaEliminacion" class="reveal-modal sin-min-height small" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog" data-options="close_on_background_click:false;close_on_esc:false;"> <div class="modal-header"> <button class="close-reveal-modal" aria-label="Close" type="button">&times;</button> <h4 class="modal-title">Confirmar Eliminación de Tipo Receta</h4> </div> <div class="modal-body"> <p class="text-center">¿Esta seguro de querer eliminar el tipo de receta "{{getNombreReceta(adm.payloadBorrar.TREC_ID)}}"</p> </div> <div class="modal-footer"> <button ng-click="deleteData();" class="btn btn-default btn-left upcase">Confirmar</button> <button ng-click="closeModal('#confirmaEliminacion');" class="btn btn-danger upcase" aria-label="Close" aria-hidden="true">Cancelar</button> </div> </div></div>