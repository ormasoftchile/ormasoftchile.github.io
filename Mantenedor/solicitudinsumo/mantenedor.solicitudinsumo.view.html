<div class="container"> <div class="custom-menu row"> <div class="columns large-12" style="margin-top:35px"> <ul class="nav nav-tabs nav-justified"> <li class="ng-show" ng-show="user.permisos.listarArticulo" ng-class="(moduloActivo == 'articulo')? 'active':''"> <a href="#" ui-sref="er.articulo"><i class="fa fa-file" aria-hidden="true"></i> Artículos Disponibles</a> </li> <li class="ng-show" ng-show="user.permisos.pasivarArticulo" ng-class="(moduloActivo == 'arsenal')? 'active':''"> <a href="#" ui-sref="er.arsenal"><i class="fa fa-folder" aria-hidden="true"></i> Mi Arsenal <span class="circulo hide-for-small-only hide-for-medium-only"><span class="numcirculo"><i class="fa fa-check-circle-o fa-2x check-num" aria-hidden="true"></i></span></span> </a> </li> <li class="ng-show" ng-show="user.permisos.listarSolicitudes" ng-class="(moduloActivo == 'solicitud')? 'active':''"> <a href="#" ui-sref="er.solicitud"><i class="fa fa-check-circle" aria-hidden="true"></i> Mis Solicitudes <span class="circulo hide-for-small-only hide-for-medium-only"> <span class="numcirculo">{{contador.solicitudes}}</span> </span> </a> </li> <li class="ng-show" ng-show="user.permisos.listarSolicitudes && user.permisos.aprobarSolicitudFarmaco" ng-class="(moduloActivo == 'farmaco')? 'active':''"> <a href="#" ui-sref="er.solicitudFarmaco"><i class="fa fa-file" aria-hidden="true"></i> Solicitud de Fármacos a Validar <span class="circulo hide-for-small-only hide-for-medium-only"> <span class="numcirculo">{{contador.farmacos}}</span> </span> </a> </li> <li class="ng-show" ng-show="user.permisos.listarSolicitudes && user.permisos.aprobarSolicitudInsumo" ng-class="(moduloActivo == 'insumo')? 'active':''"> <a href="#" ui-sref="er.solicitudInsumo"><i class="fa fa-file" aria-hidden="true"></i> Solicitud de Insumos a Validar <span class="circulo hide-for-small-only hide-for-medium-only"><span class="numcirculo">{{contador.insumos}}</span></span> </a> </li> </ul> </div> </div> <div class="row"> <div class="columns large-12" style="border-bottom:1px solid #ccc"> <span style="font-size:32px;color:#666;font-weight:300;padding-left:20px"> <i class="fa fa-clock-o" aria-hidden="true"></i>{{adm.moduleTitle}}</span> </div> </div> <div class="text-center ng-show" ng-hide="user.permisos.aprobarSolicitudInsumo"> <p class="base-font-size">No tiene los permisos necesarios para usar este módulo</p> </div> <div class="ng-show" ng-show="user.permisos.aprobarSolicitudInsumo"> <div class="row"> <div class="columns large-4"></div> <div class="columns large-4"></div> <div class="columns large-4"></div> </div> <div class="row separacion-top"> <div class="columns large-12" style="float:right"> <ul class="nav navbar-nav" style="float:left"> <li> <a href="#" onclick="return!1" ng-click="adm.escogerPendientes()" style="color:#575756!important"> Pendientes de Aprobación <i class="fa fa-circle ng-hide" ng-hide="adm.grilla.esFarmaciaPopular" aria-hidden="true"></i> <i class="fa fa-circle-o ng-hide" ng-show="adm.grilla.esFarmaciaPopular" aria-hidden="true"></i></a> </li> <li> <a href="#" onclick="return!1" ng-click="adm.escogerTodas()" style="color:#575756!important"> Todas las Solicitudes <i class="fa fa-circle ng-hide" ng-show="adm.grilla.esFarmaciaPopular" aria-hidden="true"></i> <i class="fa fa-circle-o ng-hide" ng-hide="adm.grilla.esFarmaciaPopular" aria-hidden="true"></i> </a> </li> </ul> <ul class="nav navbar-nav" style="float:right"> <li> <div class="input-group stylish-input-group" style="width:300px;float:right"> <input ng-keypress="adm.grilla.pressEnterSearch($event)" type="text" class="form-control" ng-model="adm.grilla.searchTerms" ng-change="adm.grilla.searchTermsChange()" placeholder="Ingrese el nombre del artículo"> <span class="input-group-addon" style="background-color:#fff"> <button class="search-button" ng-click="adm.grilla.search()" type="submit" id="myBtn" style="background-color:#fff;border:none"> <a href="#" onclick="return!1" style="color:#666"> <i class="fa fa-search" aria-hidden="true"></i> </a> </button> </span> </div> </li> </ul> </div> </div> <div class="row"> <div class="table-responsive mostrar-pastillas columns large-12" style="margin-top:20px"> <table class="table grilla"> <thead class="thead-inverse" style="background-color:#00949B"> <tr> <th> # <i ng-click="adm.sortId($event)" class="sorter fa fa-caret-down"></i></th> <th> Tipo <i ng-click="adm.sortNombre($event)" class="sorter fa fa-caret-down"></i> </th> <th> Nombre Genérico <i ng-click="adm.sortNombre($event)" class="sorter selected fa fa-caret-down"></i> </th> <th> Estado <i ng-click="adm.sortEstado($event)" class="sorter fa fa-caret-down"></i> </th> <th class="show-for-medium-up"> Historial </th> </tr> </thead> <tbody> <tr class="loading"> <td class="grilla-vacia ng-hide" colspan="{{adm.grilla.largo}}" ng-show="adm.grilla.waiting"> <i class="fa fa-4x fa-spinner fast-spin"></i> </td> </tr> <tr> <td class="grilla-sin-resultado ng-hide" colspan="{{adm.grilla.largo}}" ng-show="adm.grilla.sinResultado"> <p>No se encontraron resultados para la solicitud buscada</p> </td> </tr> <tr id="" ng-repeat="solicitud in adm.grilla.resultado track by solicitud.ID"> <th>{{solicitud.ID}}</th> <td ng-click="adm.show($index)" class="">{{adm.getNombreTipoArticulo(solicitud.LINE_ID)}} </td> <td ng-click="adm.show($index)"> {{solicitud.NOMBRE_GENERICO}} </td> <td ng-click="adm.show($index)">{{adm.getNombreEstado(solicitud.MES_ID)}}</td> <td class="show-for-medium-up"> <span ng-click="adm.show($index)"> {{adm.getPrimerComentario(solicitud.MHS_HISTORIAL_SOLICITUD)}}</span> <div class="btn-group btn-right historial-grid"> <i ng-click="adm.showHistorial($index)" class="fa fa-caret-down btn-right ng-show" ng-show="adm.grilla.historial[$index].length > 0" data-toggle="dropdown"></i> <ul role="menu" class="dropdown-menu pastillitas ng-show" ng-show="adm.grilla.showHistorial[$index]"> <li ng-repeat="comentario in adm.grilla.historial[$index] | orderBy:comentario.ID:true"> <strong class="text-historial">{{adm.getNombrePorId(comentario.ASPNET_USER_ID)}} [{{comentario.FECHA_CREACION | date : 'yyyy-MM-dd HH:mm'}}]:</strong> <br> <div class="coment-historial"> <i>"{{limitarString(comentario.COMENTARIO,150)}}"</i> </div> </li> </ul> </div> </td> </tr> </tbody> </table> </div> </div> <div class="columns large-12"> <div class="columns large-4"></div> <div class="columns large-4"></div> <div class="columns large-4"> <div class="row"> <div class="botonera-drop btn-right"> <button href="#" data-dropdown="gridCounter" aria-controls="gridCounter" aria-expanded="false" class="btn btn-default button dropdown" style="float:left;margin-top:15px;margin-right:10px"> Mostrar {{adm.grilla.mostrando}} </button> <ul id="gridCounter" data-dropdown-content class="f-dropdown" aria-hidden="true"> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(10)">Mostrar 10</a></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(15)">Mostrar 15</a></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(20)">Mostrar 20</a></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(25)">Mostrar 25</a></li> <li role="separator" class="divider"></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(30)">Mostrar 30</a></li> </ul> </div> </div> </div> </div> <div class="row columns large-12"> <div class="columns large-4">&nbsp;</div> <div class="columns large-4"> <nav aria-label="Page navigation"> <ul class="pagination"> <li> <a href="#" ng-click="adm.grilla.anteriorPagina()" onclick="return!1" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="(adm.grilla.paginaActual == page)? 'current':'' " ng-repeat="page in adm.grilla.paginacion.labels" ng-click="adm.grilla.muestraPagina(page)"> <a href="#" onclick="return!1">{{page}}</a> </li> <li> <a href="#" ng-click="adm.grilla.siguientePagina()" onclick="return!1" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </div> <div class="columns large-4">&nbsp;</div> </div> </div> </div> <div id="formularioSolicitud" class="reveal-modal minigrilla" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog" data-options="close_on_background_click:false;close_on_esc:false;"> <div class="modal-header"> <button class="close-reveal-modal" ng-click="adm.solicitud.cancelar()" aria-label="Close" type="button">&times;</button> <h4 class="modal-title"> <i class="fa fa-search" aria-hidden="true"></i> &nbsp;&nbsp;{{adm.solicitud.titulo}} </h4> </div> <div class="modal-body large-12"> <div class="row"> <div class="large-4 columns inputs-modal text-right">Tipo de Artículo*:</div> <div class="large-8 columns inputs-modal upcase"> <div class="">{{adm.getNombreTipoArticulo(adm.solicitud.form.tipo)}}</div> </div> </div> <div class="row"> <div class="large-4 columns inputs-modal text-right">Código ISP:</div> <div class="large-8 columns inputs-modal"> <input type="text" class="form-control" ng-model="adm.solicitud.form.codigoIsp" placeholder="Ingresa código ISP del artículo a solicitar"> <div class="alert alert-danger upcase ng-show" ng-show="adm.solicitud.requerido.codigoIspLargo" role="alert"><strong>El largo máximo del campo es 20 caracteres</strong> </div> </div> </div> <div class="row"> <div class="large-4 columns inputs-modal text-right">Nombre Genérico*:</div> <div class="large-8 columns inputs-modal"> <input type="text" class="form-control" ng-model="adm.solicitud.form.nombre" placeholder="Ingresa el nombre del artículo a solicitar"> <div class="alert alert-danger upcase ng-show" ng-show="adm.solicitud.duplicado.nombre" role="alert"><strong>El nombre ya existe en la lista de artículos</strong> </div> <div class="alert alert-danger upcase ng-show" ng-show="adm.solicitud.requerido.nombre" role="alert"><strong>REQUERIDO</strong> </div> </div> </div> <div class="row columns"> <div class="columns"> <div class="large-12 columns list-historial"> <strong>Historial:</strong> <div ng-repeat="comentario in adm.solicitud.historial | orderBy:comentario.ID:true"> <strong class="text-historial">{{adm.getNombrePorId(comentario.ASPNET_USER_ID)}} [{{comentario.FECHA_CREACION | date : 'yyyy-MM-dd HH:mm'}}]:</strong> <br> <div class="coment-historial"> <i>"{{limitarString(comentario.COMENTARIO,150)}}"</i> </div> </div> </div> </div> </div> <div class="row"> <div class="large-4 columns inputs-modal text-right">Comentario*:</div> <div class="large-8 columns inputs-modal"> <input type="text" class="form-control" ng-model="adm.solicitud.form.comentario" placeholder=""> <div class="alert alert-danger ng-show" ng-show="adm.solicitud.requerido.comentario" role="alert"><strong>REQUERIDO</strong> </div> </div> </div> </div> <div class="modal-footer"> <button type="button" ng-click="adm.solicitud.crear()" class="btn btn-warning btn-left ng-show upcase">Crear</button> <span class="btn-left ng-show" ng-show="adm.solicitud.validando"><i class="fa fa-spinner fast-spin"></i> {{adm.solicitud.textoValidando}}</span> <button type="button" ng-click="adm.solicitud.objetar()" class="btn btn-danger ng-show upcase">Objetar</button> <button type="button" class="btn btn-danger upcase" ng-click="adm.solicitud.rechazar()">Rechazar</button> </div> </div> <div id="detalleArticulo" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog" data-options=""> <div class="modal-content"> <div class="modal-header"> <button class="close-reveal-modal" aria-label="Close" type="button">&times;</button> <h4 class="modal-title upcase">Revise su solicitud de nuevo artículo</h4> </div> <div class="modal-body"> <div class="large-6 columns inputs-modal">Tipo de Artículo:</div> <div class="large-6 columns inputs-modal upcase">&nbsp;{{adm.getNombreTipoArticulo(adm.modal.detalle.articulo.LINE_ID)}}</div> <div class="large-6 columns inputs-modal">Código ISP:</div> <div class="large-6 columns inputs-modal">&nbsp;{{adm.modal.detalle.articulo.CODIGO_ISP}}</div> <div class="large-6 columns inputs-modal">Nombre Genérico:</div> <div class="large-6 columns inputs-modal">&nbsp;{{adm.modal.detalle.articulo.NOMBRE_GENERICO}}</div> <div class="large-12 columns list-historial"> <strong>Historial:</strong> <div ng-repeat="comentario in adm.modal.detalle.historial track by comentario.ID"> <strong class="text-historial">{{adm.getNombrePorId(comentario.ASPNET_USER_ID)}} [{{comentario.FECHA_CREACION | date : 'yyyy-MM-dd HH:mm'}}]:</strong> <br> <div class="coment-historial"> <i>"{{comentario.COMENTARIO}}"</i> </div> </div> </div> </div> <div class="modal-footer"> <button ng-click="closeModal('#detalleArticulo')" type="button" class="btn btn-danger upcase">Cerrar</button> </div> </div> </div>