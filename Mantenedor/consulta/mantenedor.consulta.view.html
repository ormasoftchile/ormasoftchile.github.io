<div class="container"> <div class="row"> <div class="columns large-12" style="border-bottom:1px solid #ccc"><span style="font-size:32px;color:#666;font-weight:300;padding-left:20px"> <i class="fa fa-clock-o" aria-hidden="true"></i> {{moduleTitle}}</span></div> </div> <div class="text-center ng-show" ng-hide="user.permisos.listarConsulta"> <p class="base-font-size">No tiene los permisos necesarios para usar este módulo</p> </div> <div class="ng-show" ng-show="user.permisos.listarConsulta"> <div class="row"> <div class="columns large-8"> <div class="separacion-top"> <div class="select"> <div class="large-12"> <span class="loading-input ng-show" ng-show="adm.select.waiting">&nbsp;<i class="fa fa-spinner fast-spin"></i>Cargando...</span> <div class="sin-resultado loading-input ng-show" ng-show="adm.select.sinResultado">&nbsp;No tiene establecimientos asignados</div> <input show-focus="adm.select.mostrar" class="ng-show" ng-hide="adm.select.sinResultado" ng-model="adm.select.searchText" ng-change="adm.select.actualizar()" ng-blur="adm.select.cerrar()" ng-focus="adm.select.desplegar()" ng-disabled="adm.select.waiting" placeholder="{{adm.select.placeholder}}"> </div> <div class="select-option large-12 ng-show" ng-show="adm.select.mostrar"> <table id="searchTextResults" class="large-12"> <tr ng-repeat="nodo in adm.select.nodos | filter:{RAZON_SOCIAL:adm.select.searchText}"> <td class="nodo-select" id="{{nodo.ID}}" ng-click="adm.select.seleccionar(nodo.ID)">{{nodo.RAZON_SOCIAL}}</td> </tr> </table> </div> </div> </div> </div> <div class="columns large-4"> </div> </div> <div class="row"> <div class="columns large-12 button-cabecera" style="float:right"> <ul class="nav navbar-nav ng-show" ng-show="user.permisos.agregarConsulta" style="float:left"> <li ng-click="adm.editar.crear()"> <button class="btn btn-warning" type="button" style="float:left"> <div style="color:#fff"> <i class="fa fa-user-plus fa-lg"></i> Crear Tipo de Consulta </div> </button> </li> </ul> <ul class="nav navbar-nav" style="float:right"> <li> <div class="input-group stylish-input-group" style="width:300px;float:right"> <input ng-keypress="adm.grilla.pressEnterSearch($event)" type="text" class="form-control" ng-model="adm.grilla.searchTerms" ng-change="adm.grilla.searchTermsChange()" placeholder="Ingrese el nombre de la consulta"> <span class="input-group-addon" style="background-color:#fff"> <button class="search-button" id="myBtn" style="background-color:#fff;border:none" ng-click="adm.grilla.search()"> <a href="#" onclick="return!1" style="color:#666"> <i class="fa fa-search" aria-hidden="true"></i> </a> </button> </span> </div> </li> </ul> </div> </div> <div class="row"> <div class="table-responsive columns large-12" style="margin-top:20px"> <h5>Tipos de Consulta para el nodo: {{adm.select.nombreEstablecimiento}}</h5> <form name="editFormm"> <table class="table grilla"> <thead class="thead-inverse" style="background-color:#00949B"> <tr> <th style="width:45%">Nombre<i ng-click="adm.sortNombre($event)" class="sorter fa fa-caret-down"></i></th> <th class="show-for-medium-up" style="width:10%">Clasificación<i ng-click="adm.sortClasificacion($event)" class="sorter fa fa-caret-down"></i></th> <th class="show-for-medium-up" style="width:5%">Duración<i ng-click="adm.sortDuracion($event)" class="sorter fa fa-caret-down"></i></th> <th class="show-for-medium-up" style="width:10%">Cardinalidad<i ng-click="adm.sortCardinalidad($event)" class="sorter fa fa-caret-down"></i></th> <th class="show-for-medium-up" style="width:5%">Espontáneo<i ng-click="adm.sortEspontaneo($event)" class="sorter fa fa-caret-down"></i></th> <th class="show-for-medium-up" style="width:5%">Morbilidad<i ng-click="adm.sortMorbilidad($event)" class="sorter fa fa-caret-down"></i></th> <th class="show-for-medium-up" style="width:5%">SMS<i ng-click="adm.sortSMS($event)" class="sorter fa fa-caret-down"></i></th> <th class="show-for-medium-up" class="show-for-medium-up" style="width:15%">REM</th> </tr> </thead> <tbody> <tr class="loading"> <td class="grilla-vacia ng-hide" colspan="{{adm.grilla.largo}}" ng-show="adm.grilla.waiting"> <i class="fa fa-4x fa-spinner fast-spin"></i> </td> </tr> <tr> <td class="grilla-sin-resultado ng-hide" colspan="{{adm.grilla.largo}}" ng-show="adm.grilla.sinResultado"> <p>No se encontraron resultados para la solicitud buscada</p> </td> </tr> <tr id="data-id-{{tipoAtencion.id}}" class="ng-show" ng-show="!adm.grilla.waiting" ng-repeat="tipoAtencion in adm.grilla.resultado track by tipoAtencion.id"> <td class="upcase borde-tabla">{{adm.getParseaNombre(tipoAtencion.nombre)}} <div id="botonera-id-{{tipoAtencion.id}}" class="botonera-grid btn-right"> <div class="botonera-no-edicion"> <button ng-click="popupDelete(tipoAtencion,$index)" class="btn btn-warning upcase ng-show" ng-show="user.permisos.eliminarConsulta">Eliminar</button> <button ng-click="adm.editar.editar(tipoAtencion)" class="btn btn-warning upcase ng-show" ng-show="user.permisos.modificarConsulta">Editar</button> </div> <div class="botonera-edicion"> <button ng-click="cancelEdit(tipoAtencion.id)" class="btn btn-warning">Cancelar</button> <input type="submit" ng-click="saveData(tipoAtencion.TDA)" class="btn btn-warning" value="Guardar"> </div> </div> </td> <td class="show-for-medium-up data-td-clasificacion borde-tabla"> <div class="data"> {{tipoAtencion.clasificacion}} </div> <div class="edit"> <select id="clasificacion" ng-model="consulta.clasificacion" name="clasificacion" required> <option ng-repeat="clas in adm.editar.select.clasificaciones track by clas.ID" value="{{clas.ID}}">{{clas.NOMBRE}}</option> </select> </div> </td> <td class="show-for-medium-up data-td-duracion borde-tabla"> <div class="data">{{tipoAtencion.duracion}}</div> <div class="edit"> <input type="number" name="duracion" id="duracion" ng-model="consulta.duracion" ng-init="consulta.duracion=tipoAtencion.duracion" min="0" required> </div> </td> <td class="show-for-medium-up data-td-cardinalidad borde-tabla"> <div class="data">{{adm.getNombreCardinalidad(tipoAtencion.cardinalidad)}}</div> <div class="edit"> <input type="number" name="cardinalidad" id="cardinalidad" ng-model="consulta.cardinalidad" ng-init="consulta.cardinalidad=tipoAtencion.cardinalidad" min="0" required> </div> </td> <td class="show-for-medium-up data-td-espontaneo borde-tabla"> <div class="data">{{adm.getNombreBool(tipoAtencion.espontaneo)}}</div> <div class="edit"> <input type="number" name="espontaneo" id="espontaneo" ng-model="consulta.espontaneo" ng-init="consulta.espontaneo=tipoAtencion.espontaneo" min="0" required> </div> </td> <td class="show-for-medium-up data-td-morbilidad borde-tabla"> <div class="data">{{adm.getNombreBool(tipoAtencion.morbilidad)}}</div> <div class="edit"> <input type="number" name="morbilidad" id="morbilidad" ng-model="consulta.morbilidad" ng-init="consulta.morbilidad=tipoAtencion.morbilidad" min="0" required> </div> </td> <td class="show-for-medium-up data-td-sms borde-tabla"> <div class="data">{{adm.getNombreBool(tipoAtencion.sms)}}</div> <div class="edit"> <input type="number" name="sms" id="sms" ng-model="consulta.sms" ng-init="consulta.sms=tipoAtencion.sms" min="0" required> </div> </td> <td class="show-for-medium-up data-td-rem borde-tabla"> <div class="data">{{tipoAtencion.rem}}</div> <div class="edit"> <select id="rem" ng-model="consulta.rem" name="rem"> <option ng-repeat="rem in adm.select.rems track by rem.Id" value="{{rem.Id}}">{{rem.NOMBRE}}</option> </select> </div> </td> </tr> </tbody> </table> </form> </div> </div> <div class="columns large-12"> <div class="columns large-4"></div> <div class="columns large-4"></div> <div class="columns large-4"> <div class="row"> <div class="botonera-drop btn-right"> <button href="#" data-dropdown="gridCounter" aria-controls="gridCounter" aria-expanded="false" class="btn btn-default button dropdown" style="float:left;margin-top:15px;margin-right:10px"> Mostrar {{adm.grilla.mostrando}} </button> <ul id="gridCounter" data-dropdown-content class="f-dropdown" aria-hidden="true"> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(10)">Mostrar 10</a></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(15)">Mostrar 15</a></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(20)">Mostrar 20</a></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(25)">Mostrar 25</a></li> <li role="separator" class="divider"></li> <li><a href="#" onclick="return!1" ng-click="adm.grilla.cambiarContador(30)">Mostrar 30</a></li> </ul> </div> </div> </div> </div> <div class="row"> <div class="columns large-12"> <div class="columns large-4"></div> <div class="columns large-offset-4 large-4"> <nav aria-label="Page navigation ng-show" ng-show="adm.grilla.paginacion.mostrar"> <ul class="pagination"> <li> <a href="#" ng-click="adm.grilla.anteriorPagina()" onclick="return!1" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="(adm.grilla.paginaActual == page)? 'current':'' " ng-repeat="page in adm.grilla.paginacion.labels" ng-click="adm.grilla.muestraPagina(page)"> <a href="#" onclick="return!1">{{page}}</a> </li> <li> <a href="#" ng-click="adm.grilla.siguientePagina()" onclick="return!1" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </div> <div class="columns large-4"></div> </div> </div> </div> <div id="asociarConsulta" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog" data-options="close_on_background_click:false;close_on_esc:false;"> <div class="modal-header"> <button ng-click="adm.editar.close()" class="close-reveal-modal" aria-label="Close" type="button">&times;</button> <h4 class="modal-title">{{adm.editar.textoTitulo}}&nbsp;</h4> </div> <div class="modal-body large-12 medium-12 small-12"> <form> <div class="row"> <div class="large-4 medium-4 small-7 columns inputs-modal"> <label for="form-nombre">&nbsp;&nbsp;Nombre*:</label> </div> <div class="large-8 medium-8 small-5 columns inputs-modal"> <input type="text" id="form-nombre" ng-disabled="adm.editar.procesando" ng-model="adm.editar.form.nombre"> <div class="alert alert-danger upcase ng-show" ng-show="adm.editar.validacion.nombre"> <span class="requerido">Requerido</span> </div> <div class="alert alert-danger upcase ng-show" ng-show="adm.editar.validacion.nombreDuplicado"> <span class="requerido">El nombre de la consulta ya existe</span> </div> </div> </div> <div class="row"> <div class="large-4 medium-4 small-7 columns inputs-modal"> <label for="form-duracion">&nbsp;&nbsp;Duración Sugerida*:</label> </div> <div class="large-8 medium-8 small-5 columns inputs-modal"> <input type="number" id="form-duracion" ng-disabled="adm.editar.procesando" ng-model="adm.editar.form.duracion" min="1"> <div class="alert alert-danger upcase ng-show" ng-show="adm.editar.validacion.duracion"> <span class="requerido">Requerido</span> </div> </div> </div> <div class="row"> <div class="large-4 medium-4 small-7 columns inputs-modal"> <label for="codigo-isp">&nbsp;&nbsp;Cardinalidad*:</label> </div> <div class="large-8 medium-8 small-5 columns inputs-modal"> <select ng-model="adm.editar.form.cardinalidad" ng-disabled="adm.editar.bloqueo.cardinalidad" ng-disabled="adm.editar.procesando" ng-options="unidad.valor for unidad in adm.editar.select.cardinalidad track by unidad.id"> <option style="display:none"></option> </select> </div> </div> <div class="row"> <div class="large-4 medium-4 small-7 columns inputs-modal"> <label for="codigo-isp">&nbsp;&nbsp;Clasificación&nbsp;:</label> </div> <div class="large-8 medium-8 small-5 columns inputs-modal"> <select ng-model="adm.editar.form.clasificacion" ng-change="adm.editar.showDescripcion()" ng-disabled="adm.editar.procesando" ng-options="clas.NOMBRE for clas in adm.editar.select.clasificacion track by clas.ID"> <option style="display:none"></option> </select> <div class="alert"> <i>{{adm.editar.bag.clasificacionDesc}}</i> </div> </div> </div> <div class="row"> <div class="large-4 medium-4 small-7 columns inputs-modal"> <label for="form-espontaneo">&nbsp;&nbsp;Es espontáneo&nbsp;:</label> </div> <div class="large-8 medium-8 small-5 columns inputs-modal"> <label><input type="checkbox" id="form-espontaneo" ng-disabled="adm.editar.procesando" ng-model="adm.editar.form.espontaneo"></label> <div class="alert alert-danger upcase ng-show" ng-show="adm.editar.validacion.espontaneo"> <span class="requerido">Requerido</span> </div> </div> </div> <div class="row"> <div class="large-4 medium-4 small-7 columns inputs-modal"> <label for="form-morbilidad">&nbsp;&nbsp;Morbilidad&nbsp;:</label> </div> <div class="large-8 medium-8 small-5 columns inputs-modal"> <label><input type="checkbox" id="form-morbilidad" ng-disabled="adm.editar.procesando" ng-model="adm.editar.form.morbilidad"></label> <div class="alert alert-danger upcase ng-show" ng-show="adm.editar.validacion.morbilidad"> <span class="requerido">Requerido</span> </div> </div> </div> <div class="row"> <div class="large-4 medium-4 small-7 columns inputs-modal"> <label for="form-sms">&nbsp;&nbsp;Enviar Mensajería Corta&nbsp;:</label> </div> <div class="large-8 medium-8 small-5 columns inputs-modal"> <label><input type="checkbox" id="form-sms" ng-disabled="adm.editar.procesando" ng-model="adm.editar.form.sms"></label> <div class="alert alert-danger upcase ng-show" ng-show="adm.editar.validacion.sms"> <span class="requerido">Requerido</span> </div> </div> </div> <div class="row"> <div class="large-4 medium-4 small-7 columns inputs-modal"> <label for="codigo-isp">&nbsp;&nbsp;Contabilización REM&nbsp;:</label> </div> <div class="large-8 medium-8 small-5 columns inputs-modal"> <select ng-model="adm.editar.form.rem" ng-disabled="adm.editar.procesando" ng-options="clas.Descripcion for clas in adm.editar.select.rems track by clas.Id"> <option style="display:none"></option> </select> </div> </div> </form> </div> <div class="modal-footer"> <button ng-click="adm.editar.solicitar()" type="button" class="btn btn-warning upcase btn-left ng-show" ng-show="!adm.editar.esEdicion" aria-hidden="true">Crear</button> <button ng-click="adm.editar.actualizar()" type="button" class="btn btn-warning upcase btn-left ng-show" ng-show="adm.editar.esEdicion" aria-hidden="true">Guardar</button> <span class="btn-left ng-show" ng-show="adm.editar.procesando"><i class="fa fa-spinner fast-spin"></i> {{adm.editar.textoProcesando}}</span> <button ng-click="adm.editar.close()" class="btn btn-danger upcase" aria-label="Close" aria-hidden="true">Cancelar</button> </div> </div> <div id="confirmaEliminacion" class="reveal-modal small" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog" data-options="close_on_background_click:false;close_on_esc:false;"> <div class="modal-header"> <button class="close-reveal-modal" aria-label="Close" type="button">&times;</button> <h4 class="modal-title">Confirmar Eliminación de Consulta</h4> </div> <div class="modal-body"> <p class="text-center">¿Esta seguro de querer eliminar el tipo de consulta "{{adm.payloadBorrar.nombre}}"</p> </div> <div class="modal-footer"> <button ng-click="deleteData();" ng-disabled="adm.modalEliminacion.procesando" class="btn btn-default upcase btn-left">Confirmar</button> <button ng-click="closeModal('#confirmaEliminacion');" class="btn btn-danger upcase" aria-label="Close" aria-hidden="true">Cancelar</button> </div> </div> <div id="errorEliminacion" class="reveal-modal small" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog" data-options="close_on_background_click:false;close_on_esc:false;"> <div class="modal-header"> <button class="close-reveal-modal" aria-label="Close" type="button">&times;</button> <h4 class="modal-title">Error en Eliminación de Consulta</h4> </div> <div class="modal-body modal-consulta large-12 columns"> <div class="ng-show" ng-show="adm.modalEliminacion.paso == 1"> <p class="text-justify">Para eliminar un tipo de consulta, no debe tener citas futuras o segmentos asignados:</p> <ul class="base-font-size"> <li>Se encontraron {{adm.modalEliminacion.cantidadCitas}} cita(s) futuras (<a href="#" onclick="return!1" ng-click="adm.modalEliminacion.verCitas()">Ver detalle</a>)</li> <li>Se encontraron {{adm.modalEliminacion.cantidadSegmentos}} segmento(s) asociados (<a href="#" onclick="return!1" ng-click="adm.modalEliminacion.verSegmentos()">Ver detalle</a>)</li> </ul> </div> <div class="ng-show" ng-show="adm.modalEliminacion.paso == 2"> CITAS <div class="row resultados-busqueda ng-show" ng-hide="adm.miniGrillaCita.oculto"> <div class="columns large-12" style="margin-top:20px"> <table class="table"> <thead class="thead-inverse" style="background-color:#00949B"> <tr> <th>Funcionario</th> <th>Fecha</th> <th>Hora de Inicio</th> <th>Hora de Término</th> </tr> </thead> <tbody> <tr> <td class="grilla-sin-resultado ng-hide" colspan="{{adm.miniGrillaCita.largo}}" ng-show="adm.miniGrillaCita.sinResultado"> <p>No se encontraron citas relacionadas</p> </td> </tr> <tr class="loading"> <td class="grilla-vacia ng-hide" colspan="{{adm.miniGrillaCita.largo}}" ng-show="adm.miniGrillaCita.waiting"> <i class="fa fa-4x fa-spinner fast-spin"></i> </td> </tr> <tr ng-repeat="cita in adm.miniGrillaCita.resultado"> <td scope="row">{{cita.NOMBRE}}</td> <td scope="row">{{cita.FECHA_HORA_INICIO | date : 'yyyy-MM-dd'}}</td> <td scope="row">{{cita.FECHA_HORA_INICIO | date : 'HH:mm'}}</td> <td scope="row">{{cita.FECHA_HORA_TERMINO | date : 'HH:mm'}}</td> </tr> </tbody> </table> </div> </div> <div class="row ng-show" ng-show="!adm.miniGrillaCita.oculto && !adm.miniGrillaCita.sinResultado && !adm.miniGrillaCita.waiting"> <div class="columns large-10 large-centered medium-10 medium-centered small-10 small-centered"> <nav aria-label="Page navigation ng-show" ng-show="adm.miniGrillaCita.paginacion.mostrar"> <ul class="pagination"> <li> <a href="#" ng-click="adm.miniGrillaCita.anteriorPagina()" onclick="return!1" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="(adm.miniGrillaCita.paginaActual == page)? 'current':'' " ng-repeat="page in adm.miniGrillaCita.paginacion.labels" ng-click="adm.miniGrillaCita.muestraPagina(page)"> <a href="#" onclick="return!1">{{page}}</a> </li> <li> <a href="#" ng-click="adm.miniGrillaCita.siguientePagina()" onclick="return!1" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </div> </div> </div> <div class="ng-show" ng-show="adm.modalEliminacion.paso == 3"> SEGMENTOS <div class="row resultados-busqueda ng-show" ng-hide="adm.miniGrillaSegmento.oculto"> <div class="columns large-12" style="margin-top:20px"> <table class="table"> <thead class="thead-inverse" style="background-color:#00949B"> <tr> <th>Nombre</th> <th>Fecha de Creación</th> <th>Hora</th> </tr> </thead> <tbody> <tr> <td class="grilla-sin-resultado ng-hide" colspan="{{adm.miniGrillaSegmento.largo}}" ng-show="adm.miniGrillaSegmento.sinResultado"> <p>No se encontraron segmentos relacionados</p> </td> </tr> <tr class="loading"> <td class="grilla-vacia ng-hide" colspan="{{adm.miniGrillaSegmento.largo}}" ng-show="adm.miniGrillaSegmento.waiting"> <i class="fa fa-4x fa-spinner fast-spin"></i> </td> </tr> <tr ng-repeat="cita in adm.miniGrillaSegmento.resultado"> <td scope="row">{{cita.NOMBRE}}</td> <td scope="row">{{cita.FECHA_HORA_INICIAL | date : 'yyyy-MM-dd'}}</td> <td scope="row">{{cita.FECHA_HORA_INICIAL | date : 'HH:mm'}}</td> </tr> </tbody> </table> </div> </div> <div class="row ng-show" ng-show="!adm.miniGrillaSegmento.oculto && !adm.miniGrillaSegmento.sinResultado && !adm.miniGrillaSegmento.waiting"> <div class="columns large-7 large-centered small-8 small-centered"> <nav aria-label="Page navigation ng-show" ng-show="adm.miniGrillaSegmento.paginacion.mostrar"> <ul class="pagination"> <li> <a href="#" ng-click="adm.miniGrillaSegmento.anteriorPagina()" onclick="return!1" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li ng-class="(adm.miniGrillaSegmento.paginaActual == page)? 'current':'' " ng-repeat="page in adm.miniGrillaSegmento.paginacion.labels" ng-click="adm.miniGrillaSegmento.muestraPagina(page)"> <a href="#" onclick="return!1">{{page}}</a> </li> <li> <a href="#" ng-click="adm.miniGrillaSegmento.siguientePagina()" onclick="return!1" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </div> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-left btn-warning upcase ng-show" aria-label="Close" aria-hidden="true" ng-show="adm.modalEliminacion.paso == 3 || adm.modalEliminacion.paso == 2" ng-click="adm.modalEliminacion.verPaso1();">Volver</button> <button ng-click="closeModal('#errorEliminacion');" class="btn btn-danger upcase" aria-label="Close" aria-hidden="true">Cancelar</button> </div> </div></div>